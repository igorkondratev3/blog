System.register(["./TheHeader-legacy.4514c177.js","./index-legacy.227862b9.js","./common-legacy.1fae9e57.js"],(function(e,t){"use strict";var a,o,s,n,r,l,c,i,m,u,p=document.createElement("style");return p.textContent=".comment-creation-form{display:flex;flex-direction:column;align-self:flex-start;gap:calc(var(--base) * .16);margin-top:calc(var(--base) * .16)}.comment-creation-form__input{width:calc(var(--base) * 7.5);padding:calc(var(--base) * .08);outline:none;border:calc(var(--base) * .01) solid transparent;border-radius:calc(var(--base) * .04);font:inherit;font-size:calc(var(--base) * .2);letter-spacing:inherit;color:inherit;background-color:#fff}.comment-creation-form__input:focus-visible{outline:calc(var(--base) * .01) solid black}.comment-creation-form__content{min-width:calc(var(--base) * 7.5);max-width:calc(var(--base) * 7.5);height:calc(var(--base) * 1);max-height:calc(var(--base) * 3);padding:calc(var(--base) * .08);outline:none;border:calc(var(--base) * .01) solid transparent;border-radius:calc(var(--base) * .04);font:inherit;font-size:calc(var(--base) * .2);letter-spacing:inherit;color:inherit;background-color:#fff}.comment-creation-form__content:focus-visible{outline:calc(var(--base) * .01) solid black}.comment-creation-form__create{display:flex;gap:calc(var(--base) * .08)}.email-clue{padding:calc(var(--base) * .08);border-radius:calc(var(--base) * .08);background-color:#dd6464;font-size:calc(var(--base) * .16);color:#fff}@media (max-width: 1310px){.comment-creation-form__input{width:calc(var(--base) * 3.4)}.comment-creation-form__content{min-width:calc(var(--base) * 3.4);max-width:calc(var(--base) * 3.4)}}@media (max-width: 920px){.comment-creation-form{order:-1}}.comments-content{display:flex;flex-direction:column;gap:calc(var(--base) * .16)}.comments-content__comment{display:flex;flex-direction:column;max-width:calc(var(--base) * 5);font-size:calc(var(--base) * .16)}.comment__user-information{display:flex;gap:calc(var(--base) * .08);margin:0px calc(var(--base) * .04);overflow-wrap:anywhere;word-break:break-all}.comment__value{width:calc(var(--base) * 5);padding:calc(var(--base) * .08);border:calc(var(--base) * .01) solid black;border-radius:calc(var(--base) * .08);overflow-wrap:anywhere;word-break:break-all;white-space:pre-line}.comment__date{align-self:flex-end;margin-right:calc(var(--base) * .04)}.comment__delete{position:absolute;bottom:0;left:calc(var(--base) * .04);border:none;outline:none;cursor:pointer;background-color:transparent}.comment__delete:focus-visible{border-radius:calc(var(--base) * .04);outline:calc(var(--base) * .01) solid black}.icon16{display:block;width:calc(var(--base) * .16);height:calc(var(--base) * .16)}@media (max-width: 555px){.comments-content__comment{max-width:calc(var(--base) * 3.4)}.comment__value{width:calc(var(--base) * 3.4)}}.post-page{gap:calc(var(--base) * .64)}.post{display:flex;flex-direction:column;align-items:flex-start;gap:calc(var(--base) * .16)}.post__title,.post__short-description,.post__full-description{overflow-wrap:anywhere;word-break:break-all;white-space:pre-line}.post__date{font-size:calc(var(--base) * .16)}.post__buttons{display:flex;gap:calc(var(--base) * .16)}.comments{display:flex;flex-direction:column;padding:calc(var(--base) * .16) calc(var(--base) * .08) 0px;border-top:calc(var(--base) * .01) solid black;border-radius:calc(var(--base) * .16);gap:calc(var(--base) * .16)}.comments__wrapper{display:flex;justify-content:space-between;gap:calc(var(--base) * .16)}@media (max-width: 920px){.comments__wrapper{flex-direction:column;justify-content:flex-start}}\n",document.head.appendChild(p),{setters:[function(e){a=e.u,o=e.F,s=e.S,n=e.T,r=e.a},function(e){l=e.r,c=e.c,i=e.n},function(e){m=e.g,u=e.n}],execute:function(){var t=function(e){var t={userName:e.userName.value,userEmail:e.userEmail.value,comment:e.comment.value,date:m()};return e.reset(),t},p=i({__name:"commentCreationForm",emits:["addCommentInPost"],setup:function(e){var a=function(){var e={userName:l(""),userEmail:l(""),comment:l(""),reset:function(){this.userName.value="",this.userEmail.value="",this.comment.value=""},emailValidate:function(){return t.value=!this.userEmail.value||/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(this.userEmail.value),t.value}},t=l(!0),a=c((function(){return e.userName.value.trim().length>0&&e.userName.value.length<=50&&e.userEmail.value.length<=50&&e.comment.value.trim().length>0&&e.comment.value.length<=255}));return{commentData:e,isCorrectCommentData:a,isCorrectEmail:t}}();return{__sfc:!0,commentData:a.commentData,isCorrectCommentData:a.isCorrectCommentData,isCorrectEmail:a.isCorrectEmail,getComment:t}}},(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("form",{staticClass:"comment-creation-form"},[t("input",{directives:[{name:"model",rawName:"v-model",value:a.commentData.userName.value,expression:"commentData.userName.value"}],staticClass:"comment-creation-form__user-name comment-creation-form__input",attrs:{type:"text",placeholder:"Имя",required:"",maxlength:"50"},domProps:{value:a.commentData.userName.value},on:{input:function(t){t.target.composing||e.$set(a.commentData.userName,"value",t.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:a.commentData.userEmail.value,expression:"commentData.userEmail.value"}],staticClass:"comment-creation-form__user-email comment-creation-form__input",attrs:{type:"email",placeholder:"email",maxlength:"50"},domProps:{value:a.commentData.userEmail.value},on:{input:function(t){t.target.composing||e.$set(a.commentData.userEmail,"value",t.target.value)}}}),t("textarea",{directives:[{name:"model",rawName:"v-model",value:a.commentData.comment.value,expression:"commentData.comment.value"}],staticClass:"comment-creation-form__content",attrs:{required:"",maxlength:"255",placeholder:"Текст комментария"},domProps:{value:a.commentData.comment.value},on:{input:function(t){t.target.composing||e.$set(a.commentData.comment,"value",t.target.value)}}}),t("div",{staticClass:"comment-creation-form__create"},[t("button",{staticClass:"comment-creation-form__button base-button",attrs:{disabled:!a.isCorrectCommentData},on:{click:function(t){t.preventDefault(),a.commentData.emailValidate()&&e.$emit("addCommentInPost",a.getComment(a.commentData))}}},[e._v(" Добавить комментарий ")]),a.isCorrectEmail?e._e():t("div",{staticClass:"email-clue"},[e._v(" Email должен соответстоввать шаблону name@email.com ")])])])}),[],!1,null,null,null,null).exports,d=i({__name:"commentsContent",props:{comments:Array},emits:["deleteComment"],setup:function(e){return{__sfc:!0,normalizeDate:u}}},(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"comments-content"},e._l(e.comments.toReversed(),(function(o,s){return t("div",{key:"".concat(s," comment"),staticClass:"comments-content__comment comment"},[t("div",{staticClass:"comment__user-information"},[t("div",{staticClass:"comment__user-name"},[t("strong",[e._v("Имя:")]),e._v(" "+e._s(o.userName)+" ")]),Boolean(o.userEmail)?t("div",{staticClass:"comment__user-email"},[t("strong",[e._v("email:")]),e._v(" "+e._s(o.userEmail)+" ")]):e._e()]),t("div",{staticClass:"comment__value"},[e._v(e._s(o.comment))]),t("div",{staticClass:"comment__date"},[e._v(e._s(a.normalizeDate(o.date)))]),t("button",{staticClass:"comment__delete",on:{click:function(t){return e.$emit("deleteComment",e.comments.length-s-1)}}},[t("img",{staticClass:"icon16",attrs:{src:"/blog/assets/delete.7370a822.svg",alt:"delete"}})])])})),0)}),[],!1,null,null,null,null).exports;e("default",i({__name:"PostPage",props:{id:String},setup:function(e){var t=e,i=a(),v=function(e){var t=e,a=JSON.parse(localStorage.getItem("posts")),o={post:l(structuredClone(a[t])),deletePost:function(e){a.splice(t,1),localStorage.setItem("posts",JSON.stringify(a)),e.push("/")},editPost:function(){this.post.value.date=m(),a.splice(t,1),a.push(structuredClone(this.post.value)),localStorage.setItem("posts",JSON.stringify(a)),t=a.length-1,n.value=!1},deleteComment:function(e){o.post.value.comments.splice(e,1),a[t].comments.splice(e,1),localStorage.setItem("posts",JSON.stringify(a))},addComment:function(e){o.post.value.comments.push(e),a[t].comments.push(e),localStorage.setItem("posts",JSON.stringify(a))}},s=c((function(){return Boolean(o.post.value.title.trim())&&Boolean(o.post.value.shortDescription.trim())&&o.post.value.title.length<=50&&o.post.value.shortDescription.length<=100&&o.post.value.fullDescription.length<=255})),n=l(!1);return{postData:o,isCorrectPostData:s,editMode:n}}(t.id);return{__sfc:!0,props:t,router:i,postData:v.postData,isCorrectPostData:v.isCorrectPostData,editMode:v.editMode,FullDescription:o,ShortDescription:s,TitleInput:n,TheHeader:r,CommentCreationForm:p,CommentsContent:d,normalizeDate:u}}},(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"post-page page"},[t(a.TheHeader,{attrs:{header:"Мини-блог"}}),t("article",{staticClass:"post"},[a.editMode?t(a.TitleInput,{attrs:{maxlength:50},model:{value:a.postData.post.value.title,callback:function(t){e.$set(a.postData.post.value,"title",t)},expression:"postData.post.value.title"}}):t("h2",{staticClass:"post__title"},[e._v(" "+e._s(a.postData.post.value.title)+" ")]),a.editMode?t(a.ShortDescription,{attrs:{maxlength:100},model:{value:a.postData.post.value.shortDescription,callback:function(t){e.$set(a.postData.post.value,"shortDescription",t)},expression:"postData.post.value.shortDescription"}}):t("p",{staticClass:"post__short-description"},[e._v(" "+e._s(a.postData.post.value.shortDescription)+" ")]),a.editMode?t(a.FullDescription,{attrs:{maxlength:255},model:{value:a.postData.post.value.fullDescription,callback:function(t){e.$set(a.postData.post.value,"fullDescription",t)},expression:"postData.post.value.fullDescription"}}):t("p",{staticClass:"post__full-description"},[e._v(" "+e._s(a.postData.post.value.fullDescription)+" ")]),t("p",{staticClass:"post__date"},[e._v(e._s(a.normalizeDate(a.postData.post.value.date)))]),t("div",{staticClass:"post__buttons"},[t("button",{staticClass:"post__delete base-button",on:{click:function(e){return a.postData.deletePost(a.router)}}},[e._v(" Удалить запись ")]),a.editMode?t("button",{staticClass:"base-button",attrs:{disabled:!a.isCorrectPostData},on:{click:function(e){return a.postData.editPost()}}},[e._v(" Закончить редактирование ")]):t("button",{staticClass:"post__edit base-button",on:{click:function(e){a.editMode=!0}}},[e._v(" Редактировать запись ")])])],1),t("div",{staticClass:"comments"},[t("h4",{staticClass:"comments__header"},[e._v("Комментарии")]),t("div",{staticClass:"comments__wrapper"},[t(a.CommentsContent,{attrs:{comments:a.postData.post.value.comments},on:{deleteComment:a.postData.deleteComment}}),t(a.CommentCreationForm,{on:{addCommentInPost:a.postData.addComment}})],1)])],1)}),[],!1,null,null,null,null).exports)}}}));
